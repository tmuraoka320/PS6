use_reed_smd <- use_reed_smd[,c(1:3,5,4,7,8,6,9)]
colnames(use_reed_smd)
rm(use_reed_smd)
reed_smd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/Reed_SMD.csv", stringsAsFactors=FALSE)
use_reed_smd <- reed_smd[reed_smd$X...O %in% use_candid,-c(4:6,10,11,15:23)]
colnames(use_reed_smd)[c(6,7,9)] <- c("vote", "wl", "totvote")
colnames(use_reed_smd)
colnames(use_reed_mmd)
colnames(reed_smd)
colnames(use_reed_mmd)
use_reed_mmd <- use_reed_mmd[,c(1:8,12,9:11)]
colnames(use_reed_mmd)
reed_smd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/Reed_SMD.csv", stringsAsFactors=FALSE)
use_reed_smd <- reed_smd[reed_smd$X...O %in% use_candid,-c(4:6,10,11,15:23)]
colnames(use_reed_smd)[c(6,7,9)] <- c("vote", "wl", "totvote")
use_reed_smd <- use_reed_smd[,c(1:3,5,4,8,6,7,9)]
colnames(use_reed_smd)
use_reed_smd$wins <- NA
use_reed_smd$m <- 1
use_reed_smd$m
colnames(use_reed_mmd)
use_reed_smd$ur <- NA
colnames(use_reed_smd)
colnames(use_reed_mmd)
colnames(use_reed_smd) == colnames(use_reed_mmd)
colnames(use_reed_smd)[c(2,6,7,9)] <- c("prefecture","vote", "wl", "totvote")
length(unique(use_reed_smd$X...O))
reed_mmd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/Reed_MMD.csv", stringsAsFactors=FALSE)
use_reed_mmd <- reed_mmd[reed_mmd$X...O %in% use_candid,-c(3,5,7,10,11,14,19:44)]
use_reed_mmd <- use_reed_mmd[,c(1:8,12,9:11)]
length(unique(use_reed_mmd$X...O))
reed_smd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/Reed_SMD.csv", stringsAsFactors=FALSE)
use_reed_smd <- reed_smd[reed_smd$X...O %in% use_candid,-c(4:6,10,11,15:23)]
length(unique(use_reed_smd$X...O))
colnames(use_reed_smd)[c(2,6,7,9)] <- c("prefecture","vote", "wl", "totvote")
use_reed_smd <- use_reed_smd[,c(1:3,5,4,8,6,7,9)]
use_reed_smd$wins <- NA
use_reed_smd$m <- 1
use_reed_smd$ur <- NA
colnames(use_reed_smd) == colnames(use_reed_mmd)
use_reed <- rbind(use_reed_mmd, use_reed_smd)
colnames(use_res)
final_data <- merge(use_res, use_reed, by=c("X...O", "year"))
help("merge")
final_data <- merge(use_res, use_reed, by=c("X...O", "year"), all.x=TRUE)
write.csv(final_data, "MP_before_reform.csv")
unique(final_data$X...O)
colnames(reed_smd)
reed_smd$kuyr[1]
reed_smd$kuyr[2]
reed_smd$kuyr[3]
View(final_data)
final_data$file[400]
strsplit(final_data$file[400], split=".")
strsplit(final_data$file[400], split=".")
strsplit(final_data$file[400], split=".txt")
strsplit(final_data$file[400], split=". ")
strsplit(final_data$file[400], split=" ")
substr(final_data$file[400], start=5, stop=5)
substr(final_data$file[400], start=6, stop=6)
dot <- substr(final_data$file[400], start=6, stop=6)
strsplit(final_data$file[400], split=dot)
help(strsplit)
strsplit(final_data$file[400], split=dot, fixed=TRUE)
unlist(strsplit(final_data$file[400], split=dot, fixed=TRUE))[3]
final_data$file <- sapply(final_data$file, function(x){
unlist(strsplit(x, split=dot, fixed=TRUE))[3]
})
final_data$file
write.csv(final_data, "MP_before_reform.csv")
View(final_data)
candidate_data <- unique(final_data[,c("X...O", "prefecture")])
candidate_data <- unique(final_data[,c("X...O")])
candidate_data <- data.frame(unique(final_data$X...O))
write.csv(candidate_data, "candidate_data.csv")
res <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Catalinac_merged_with_topics.csv", stringsAsFactors=FALSE, header=TRUE)
reed_mmd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Reed_MMD.csv", stringsAsFactors=FALSE)
reed_smd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Reed_SMD.csv", stringsAsFactors=FALSE)
res <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Catalinac_merged_with_topics.csv", stringsAsFactors=FALSE, header=TRUE)
res <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Catalinac_merged_with_topics.csv", stringsAsFactors=FALSE, header=TRUE)
unique(res$year)
table(tapply(res$year, res$X...O, function(x){1993 %in% x & 1996 %in% x}))
sub_candid <- tapply(res$year, res$X...O, function(x){1993 %in% x & 1996 %in% x})
use_candid <- names(which(sub_candid==TRUE))
use_res <- res[res$X...O %in% use_candid, 1:8]
length(unique(use_res$X...O))
reed_mmd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Reed_MMD.csv", stringsAsFactors=FALSE)
use_reed_mmd <- reed_mmd[reed_mmd$X...O %in% use_candid,-c(3,5,7,10,11,14,19:44)]
use_reed_mmd <- use_reed_mmd[,c(1:8,12,9:11)]
length(unique(use_reed_mmd$X...O))
reed_smd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Reed_SMD.csv", stringsAsFactors=FALSE)
use_reed_smd <- reed_smd[reed_smd$X...O %in% use_candid,-c(4:6,10,11,15:23)]
length(unique(use_reed_smd$X...O))
colnames(use_reed_smd)[c(2,6,7,9)] <- c("prefecture","vote", "wl", "totvote")
use_reed_smd <- use_reed_smd[,c(1:3,5,4,8,6,7,9)]
use_reed_smd$wins <- NA
use_reed_smd$m <- 1
use_reed_smd$ur <- NA
colnames(use_reed_smd) == colnames(use_reed_mmd)
use_reed <- rbind(use_reed_mmd, use_reed_smd)
final_data <- merge(use_res, use_reed, by=c("X...O", "year"), all.x=TRUE)
dot <- substr(final_data$file[400], start=6, stop=6)
final_data$file <- sapply(final_data$file, function(x){
unlist(strsplit(x, split=dot, fixed=TRUE))[3]
})
table(tapply(res$year, res$X...O, function(x){1990 %in% x & 1996 %in% x}))
table(tapply(final_data$year, final_data$X...O, function(x){1990 %in% x & 1996 %in% x}))
table(tapply(res$year, res$X...O, function(x){1990 %in% x & 2000 %in% x}))
table(tapply(final_data$year, final_data$X...O, function(x){1990 %in% x & 2000 %in% x}))
table(tapply(use_res$year, use_res$X...O, function(x){1990 %in% x & 2000 %in% x}))
sub_candid <- sapply(res$X...O, function(x){
subdata <- res[x,]
1993 %in% subdata$year & 1996 %in% subdata$year
})
names(which(sub_candid==TRUE))
sub_candid <- sapply(res$X...O, function(x){
subdata <- res[x,]
if(1993 %in% subdata$year & 1996 %in% subdata$year){
1
}
else{
0
}
})
table(sub_candid)
sub_candid <- sapply(unique(res$X...O), function(x){
subdata <- res[x,]
if(c(1993, 1996) %in% subdata$year){
1
}
else{
0
}
})
unique(res$X...O)
table(sub_candid)
sub_candid <- sapply(unique(res$X...O), function(x){
subdata <- subset(res, res$X...O==x)
if(1993 %in% subdata$year & 1996 %in% subdata$year){
1
}
else{
0
}
})
table(sub_candid)
which(sub_candid==1)
names(which(sub_candid==1))
use_candid <- names(which(sub_candid==1))
use_res <- res[res$X...O %in% use_candid, 1:8]
length(unique(use_res$X...O))
table(tapply(res$year, res$X...O, function(x){1990 %in% x & 1996 %in% x}))
table(tapply(use_res$year, res$X...O, function(x){1990 %in% x & 1996 %in% x}))
table(tapply(use_res$year, use_res$X...O, function(x){1990 %in% x & 1996 %in% x}))
sub_candid <- sapply(unique(res$X...O), function(x){
subdata <- subset(res, res$X...O==x)
if(1990 %in% subdata$year & 1996 %in% subdata$year){
1
}
else{
0
}
})
table(sub_candid)
names(tapply(use_res$year, use_res$X...O, function(x){1990 %in% x & 1996 %in% x}))
names(tapply(res$year, res$X...O, function(x){1990 %in% x & 1996 %in% x})==TRUE)
names(which(tapply(res$year, res$X...O, function(x){1990 %in% x & 1996 %in% x})==TRUE))
zzz <- names(which(tapply(res$year, res$X...O, function(x){1990 %in% x & 1996 %in% x})==TRUE))
use_candid
which(!(use_candid %in% zzz))
use_candid <- names(which(sub_candid==1))
which(!(use_candid %in% zzz))
lelngth(use_candid)
length(use_candid)
sub_candid <- sapply(unique(res$X...O), function(x){
subdata <- subset(res, res$X...O==x)
if(1993 %in% subdata$year & 1996 %in% subdata$year){
1
}
else{
0
}
})
use_candid <- names(which(sub_candid==1))
use_candid <- names(which(sub_candid==1))
use_res <- res[res$X...O %in% use_candid, 1:8]
zzz
aaa <- names(which(tapply(use_res$year, use_res$X...O, function(x){1990 %in% x & 1996 %in% x})==TRUE))
which(!(zzz %in% aaa))
zzz[184]
zzz[c(184, 241, 252, 258)]
unique(res$year)
sort(unique(res$year))
sort(unique(res$year))
subset(res, res$X...O[1])
subset(res, res$X...O==res$X...O[1])
zzz <- subset(res, res$X...O==res$X...O[1])
zzz[, c("year", "priv")]
t(zzz[, c("year", "priv")])
res <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Catalinac_merged_with_topics.csv", stringsAsFactors=FALSE, header=TRUE)
use_res <- res[, 1:8]
rm(use_res)
res <- res[, 1:8]
res$file <- sapply(res$file, function(x){
unlist(strsplit(x, split=dot, fixed=TRUE))[3]
})
res$file <- sapply(res$file, function(x){
unlist(strsplit(x, split=".", fixed=TRUE))[3]
})
res$file <- sapply(res$file, function(x){
unlist(strsplit(x, split=".", fixed=TRUE))[3]
})
View(res)
res$file
reed_mmd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Reed_MMD.csv", stringsAsFactors=FALSE)
use_reed_mmd <- reed_mmd[,-c(3,5,7,10,11,14,19:44)]
use_reed_mmd <- use_reed_mmd[,c(1:8,12,9:11)]
length(unique(use_reed_mmd$X...O))
length(unique(res$X...O))
reed_smd <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/RepData/Reed_SMD.csv", stringsAsFactors=FALSE)
use_reed_smd <- reed_smd[,-c(4:6,10,11,15:23)]
colnames(use_reed_smd)[c(2,6,7,9)] <- c("prefecture","vote", "wl", "totvote")
use_reed_smd <- use_reed_smd[,c(1:3,5,4,8,6,7,9)]
use_reed_smd$wins <- NA
use_reed_smd$m <- 1
use_reed_smd$ur <- NA
colnames(use_reed_smd) == colnames(use_reed_mmd)
length(unique(use_reed_smd$X...O))
use_reed <- rbind(use_reed_mmd, use_reed_smd)
final_data <- merge(res, use_reed, by=c("X...O", "year"), all.x=TRUE)
View(final_data)
write.csv(final_data, "Dependent_Variable.csv")
table(tapply(res$year, res$X...O, function(x){1986 %in% x & 2003 %in% x}))
table(tapply(res$year, res$X...O, function(x){1990 %in% x & 1996 %in% x}))
table(tapply(res$year, res$X...O, function(x){1990 %in% x & 2000 %in% x}))
table(tapply(res$year, res$X...O, function(x){1990 %in% x & 2003 %in% x}))
table(tapply(res$year, res$X...O, function(x){1990 %in% x & 2005 %in% x}))
table(tapply(res$year, res$X...O, function(x){1990 %in% x & 2009 %in% x}))
table(tapply(res$year, res$X...O, function(x){1993 %in% x & 1996 %in% x}))
table(tapply(res$year, res$X...O, function(x){1986 %in% x & 2000 %in% x}))
sort(unique(res$year))
tapply(res$year, res$X...O, function(x){1986 %in% x & 2000 %in% x})
sort(unique(res$year))[-1]
sort(unique(res$year))[:-1]
sort(unique(res$year))[-length(unique(res$year))]
years <- sort(unique(res$year))[-length(unique(res$year))]
zzz <- tapply(res$year, res$X...O, function(x){1986 %in% x & 2000 %in% x})
names(which(zzz==TRUE))
years <- sort(unique(res$year))[-length(unique(res$year))]
candid_vec <- NULL
for(i in years){
for(j in years){
if(i != j){
sub_candid <- tapply(res$year, res$X...O, function(x){i %in% x & j %in% x})
include_candid <- names(which(sub_candid==TRUE))
candid_vec <- unique(c(candid_vec, include_candid))
}
}
}
length(unique(candid_vec))
candid_vec
candid_vec <- NULL
for(i in years){
for(j in years){
if(i < j){
sub_candid <- tapply(res$year, res$X...O, function(x){i %in% x & j %in% x})
include_candid <- names(which(sub_candid==TRUE))
candid_vec <- unique(c(candid_vec, include_candid))
}
}
}
for(i in candid_vec){
sub <- subset(res, res$X...O==i)
print(c(min(sub$year), max(sub$year)))
}
candid_vec <- NULL
for(i in c(1989, 1990, 1993)){
for(j in c(1996, 2000, 2003, 2005)){
sub_candid <- tapply(res$year, res$X...O, function(x){i %in% x & j %in% x})
include_candid <- names(which(sub_candid==TRUE))
candid_vec <- unique(c(candid_vec, include_candid))
}
}
for(i in candid_vec){
sub <- subset(res, res$X...O==i)
print(c(min(sub$year), max(sub$year)))
}
candidate_data <- data.frame(candid_vec)
write.csv(candidate_data, "Candidate_Variable.csv")
final_data <- final_data[final_data$X...O %in% candid_vec,]
length(unique(final_data$X...O))
write.csv(final_data, "Dependent_Variable.csv")
term <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/term.csv", stringsAsFactors=FALSE)
View(term)
Candidate_Variable <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/Candidate_Variable.csv", header=FALSE, na.strings="", stringsAsFactors=FALSE)
View(Candidate_Variable)
Candidate_Variable <- read.csv("C:/Users/Taishi/OneDrive/Documents/Research/JapanPorkPolicy/DATA/Candidate_Variable.csv", stringsAsFactors=FALSE)
View(Candidate_Variable)
new_data <- merge(Candidate_Variable, term, by="candidate", all.x=TRUE)
View(new_data)
table(new_data)
table(new_data$term)
sum(new_data$term)
sum(na.omit(new_data$term))
length(is.na(new_data$term))
length(is.na(new_data$term)==T)
is.na(new_data$term)
which(is.na(new_data$term)==TRUE)
write.csv(new_data, "Candidate_Variable.csv")
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
class(createCandidate("obama", 333, "Republican"))
createCandidate(1, 333, "Republican") # error because name should not be a number
createCandidate("obama", -200, "Republican") # error because the number is strange
createCandidate("obama", 333, "Whig") # error because party should be Democratic or
obama <- createCandidate("obama", 333, "Republican")
show(obama)
print(obama)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
help("print")
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
obama <- createCandidate("obama", 333, "Republican")
show(obama)
print(obama)
obama
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
print(obama)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
show(obama)
obama <- createCandidate("obama", 333, "Republican")
show(obama)
print(obama)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
show
showMethods(show)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
library(devtools);library(roxygen2)
setwd("C:/Users/Taishi/Documents/PS6")
current.code <- as.package("PS6Package")
load_all(current.code)
document(current.code)
createCandidate("obama", 333, "Republican") # this works
class(createCandidate("obama", 333, "Republican"))
createCandidate(1, 333, "Republican") # error because name should not be a number
createCandidate("obama", -200, "Republican") # error because the number is strange
createCandidate("obama", 333, "Whig") # error because party should be Democratic or
obama <- createCandidate("obama", 333, "Republican")
show(obama)
print(obama)
obama <- createCandidate("obama", 333, "Republican")
propNeeded(obama, 1500) # this works
propNeeded("aaa", 1500) # error because the first argument is not a Candidate class
propNeeded(obama, "ten") # error because remaining should be numeric
propNeeded(obama, 2000000000) # error because the remaining number is inaccurate
propNeeded(obama, 100) # error because there is no chance of winning
as(object=obama, Class="Remaining") # moving between classes
class(as(object=obama, Class="Remaining"))
obama <- createCandidate("obama", 333, "Republican")
obama2 <- createCandidate("obama2", 30, "Republican")
obama3 <- createCandidate("obama3", 500, "Republican")
bush <- createCandidate("bush", 333, "Democratic")
bush2 <- createCandidate("bush2", 2400, "Republican")
cand_list <- list(obama, obama2, obama3, bush, bush2)
createRace(cand_list[1:3]) # this works
createRace(cand_list[1:4]) # error because one candidate "bush" is from Democratic
createRace(cand_list[c(1:3,5)]) # error because there is the number delegates won is
obamas <- createRace(cand_list[1:3])
plot(obamas, "ANYTHING")
